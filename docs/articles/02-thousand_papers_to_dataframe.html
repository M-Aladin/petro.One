<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thousands of Papers to Dataframe â€¢ petro.One</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">petro.One</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-types_of_papers.html">Document types for Papers</a>
    </li>
    <li>
      <a href="../articles/02-thousand_papers_to_dataframe.html">Thousands of Papers to Dataframe</a>
    </li>
    <li>
      <a href="../articles/03-make_wordcloud_01.html">Make a word cloud</a>
    </li>
    <li>
      <a href="../articles/03-make_wordcloud_02.html">Improving the word cloud</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Thousands of Papers to Dataframe</h1>
                        <h4 class="author">Alfonso R. Reyes</h4>
            
            <h4 class="date">2017-10-10</h4>
          </div>

    
    
<div class="contents">
<p>The maximum number of rows that a OnePetro query can return is 1000. It means that the user could set up the query to return up to amximum of 1000 papers. Abover that number, the query to OnePetro will return error.</p>
<p>OnePetro has options to define the number of rows to display at 10, 50 and 100 rows. Additionally, through scripts like these, that number could be raised up to 1,000.</p>
<p>This article describes the process of reading multiple pages with thousand of papers to a unique dataframe.</p>
<p>Retrieve the most numerous paper by type</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(petro.One)

<span class="co"># folder where we will save the results</span>
outdir &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"out"</span>, <span class="dt">package =</span> <span class="st">"petro.One"</span>)</code></pre></div>
<div id="perform-a-initial-search" class="section level2">
<h2 class="hasAnchor">
<a href="#perform-a-initial-search" class="anchor"></a>Perform a initial search</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>)

<span class="kw"><a href="../reference/get_papers_count.html">get_papers_count</a></span>(my_url)</code></pre></div>
<pre><code>## [1] 3996</code></pre>
</div>
<div id="what-type-of-paper-do-we-have" class="section level2">
<h2 class="hasAnchor">
<a href="#what-type-of-paper-do-we-have" class="anchor"></a>What type of paper do we have?</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url)
<span class="kw"><a href="../reference/summary_by_doctype.html">summary_by_doctype</a></span>(result)</code></pre></div>
<pre><code>## # A tibble: 7 x 2
##               name value
##              &lt;chr&gt; &lt;dbl&gt;
## 1          Chapter     1
## 2 Conference paper  3028
## 3          General    60
## 4    Journal paper   894
## 5            Media     5
## 6            Other     1
## 7     Presentation     7</code></pre>
<p>For the tyme being we will retrieve only conference papers.</p>
</div>
<div id="collect-first-1000-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-first-1000-rows" class="anchor"></a>Collect first 1000 rows</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># we use "conference-paper" only because other document types have</span>
<span class="co"># different dataframe structure</span>

my_url_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">0</span>,
                          <span class="dt">rows  =</span> <span class="dv">1000</span>)

<span class="kw"><a href="../reference/get_papers_count.html">get_papers_count</a></span>(my_url_<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] 3028</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">page_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_<span class="dv">1</span>)
htm_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-01-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/xml2/topics/write_xml">write_html</a></span>(page_<span class="dv">1</span>, <span class="dt">file =</span> htm_<span class="dv">1</span>)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 6
##                                                         title_data
##                                                              &lt;chr&gt;
##  1                             Pressure Transient Analysis in SAGD
##  2                           Well-head Pressure Transient Analysis
##  3     Automated Pressure Transient Analysis with Smart Technology
##  4  Pressure Transient Analysis in Multilayered Faulted Reservoirs
##  5  Pressure Transient Analysis of Multifractured Horizontal Wells
##  6 Integrating Pressure Transient Analysis in Hydraulic Fracturing
##  7        How Wellbore Dynamics Affect Pressure Transient Analysis
##  8             Numerical Solutions for Pressure Transient Analysis
##  9         Software Showcase: Pressure Transient Analysis Programs
## 10                Pressure-Transient Analysis for Perforated Wells
## # ... with 990 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="collect-second-set-of-1000-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-second-set-of-1000-rows" class="anchor"></a>Collect second set of 1000 rows</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">1000</span>,
                          <span class="dt">rows  =</span> <span class="dv">1000</span>)

page_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_<span class="dv">2</span>)
htm_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-02-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/xml2/topics/write_xml">write_html</a></span>(page_<span class="dv">2</span>, <span class="dt">file =</span> htm_<span class="dv">2</span>)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">2</span>)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1 Neural Network Analysis Identifies Production Enhancement Opportunities in 
##  2 Storativity Ratio, Matrix/Fracture Permeability Ratio, Fracture Partitionin
##  3 Integration Wireline Formation Testing and Well Testing Evaluation - An Exa
##  4 An Integrated Approach to Designing an Offshore Heavy Oil Well Test - North
##  5  Setting a New Milestone in Carbonate Matrix Stimulation with Coiled Tubing
##  6                             Transient Analysis in Partially Completed Wells
##  7 Performance of Plugless Toe Stages and Non-Isolated Wellbore in Multi-Stage
##  8 After-Closure Idiosyncrasies of Fracture Calibration Test Analysis in Shale
##  9 New Approach for Using Surfactants to Enhance Oil Recovery from Naturally F
## 10 New Variable Compliance Method for Estimating In-Situ Stress and Leak-Off f
## # ... with 990 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="collect-next-set-of-1000-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-next-set-of-1000-rows" class="anchor"></a>Collect next set of 1000 rows</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">2000</span>,
                          <span class="dt">rows  =</span> <span class="dv">1000</span>)

page_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_<span class="dv">3</span>)
htm_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-03-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/xml2/topics/write_xml">write_html</a></span>(page_<span class="dv">3</span>, <span class="dt">file =</span> htm_<span class="dv">3</span>)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">3</span>)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1 New High Density Fracturing Fluid to Stimulate a High Pressure &amp; High Tempe
##  2            Field Development of the Scapa Field: A Marginal North Sea Field
##  3                Production Data Analysis Type Curves for the Devonian Shales
##  4 The Peregrino Challenge: How to Keep Reliable Models While Drilling Eight W
##  5         Incremental Oil Success From Waterflood Sweep Improvement in Alaska
##  6 New Techniques in LWD Formation Pressure Testing Enable Real-Time Reservoir
##  7 New Downhole Gas Separator Enhances Coiled Tubing Jetting and Stimulation P
##  8 Integrating Pressure Transient Test Data With Seismic Attribute Analysis to
##  9 Propellant Perforation Breakdown Technique: Eastern Venezuela Field Applica
## 10 Slug Testing in Multiple Coal Seams Intersected by a Single, Vertical Fract
## # ... with 990 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="collect-remaining-set" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-remaining-set" class="anchor"></a>Collect remaining set</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">3000</span>,
                          <span class="dt">rows  =</span> <span class="dv">100</span>)

page_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_<span class="dv">4</span>)
htm_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-04-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/xml2/topics/write_xml">write_html</a></span>(page_<span class="dv">4</span>, <span class="dt">file =</span> htm_<span class="dv">4</span>)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">4</span>)</code></pre></div>
<pre><code>## # A tibble: 28 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1 Reservoir Engineering for Unconventional Reservoirs: What Do We Have to Con
##  2                        After-Closure Analysis of Fracture Calibration Tests
##  3 Analysis of Well Tests From Naturally Fractured Reservoirs by Automated Typ
##  4 Effective Well and Reservoir Evaluation Without the Need for Well Pressure 
##  5                     Case Study: Development and Optimization of Quicksilver
##  6 Evaluating Fissured Formation Geometry from Well Test Data: a Field Example
##  7               Afterflow Measurement and Deconvolution in Well Test Analysis
##  8          Hydraulic Fracturing Makes the Difference: New Life for Old Fields
##  9                    Analysis of Injection/Falloff Data From Horizontal Wells
## 10 Innovative Use of Open-Hole Wireline Formation Pressure Testing in Waterflo
## # ... with 18 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="binding-tables-in-one-dataframe" class="section level2">
<h2 class="hasAnchor">
<a href="#binding-tables-in-one-dataframe" class="anchor"></a>Binding tables in one dataframe</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">1</span>)
p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">2</span>)
p3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">3</span>)
p4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_<span class="dv">4</span>)

papers &lt;-<span class="st"> </span><span class="kw">rbind</span>(p1, p2, p3, p4)
papers</code></pre></div>
<pre><code>## # A tibble: 3,028 x 6
##                                                         title_data
##                                                              &lt;chr&gt;
##  1                             Pressure Transient Analysis in SAGD
##  2                           Well-head Pressure Transient Analysis
##  3     Automated Pressure Transient Analysis with Smart Technology
##  4  Pressure Transient Analysis in Multilayered Faulted Reservoirs
##  5  Pressure Transient Analysis of Multifractured Horizontal Wells
##  6 Integrating Pressure Transient Analysis in Hydraulic Fracturing
##  7        How Wellbore Dynamics Affect Pressure Transient Analysis
##  8             Numerical Solutions for Pressure Transient Analysis
##  9         Software Showcase: Pressure Transient Analysis Programs
## 10                Pressure-Transient Analysis for Perforated Wells
## # ... with 3,018 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="find-which-papers-have-the-search-word-in-the-title" class="section level2">
<h2 class="hasAnchor">
<a href="#find-which-papers-have-the-search-word-in-the-title" class="anchor"></a>Find which papers have the search word in the title</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pattern &lt;-<span class="st"> "pressure transient analysis"</span>
rows &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="dt">pattern =</span> pattern, papers<span class="op">$</span>title_data, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>)
papers[rows, ]</code></pre></div>
<pre><code>## # A tibble: 161 x 6
##                                                           title_data
##                                                                &lt;chr&gt;
##  1                               Pressure Transient Analysis in SAGD
##  2                             Well-head Pressure Transient Analysis
##  3       Automated Pressure Transient Analysis with Smart Technology
##  4    Pressure Transient Analysis in Multilayered Faulted Reservoirs
##  5    Pressure Transient Analysis of Multifractured Horizontal Wells
##  6   Integrating Pressure Transient Analysis in Hydraulic Fracturing
##  7          How Wellbore Dynamics Affect Pressure Transient Analysis
##  8               Numerical Solutions for Pressure Transient Analysis
##  9           Software Showcase: Pressure Transient Analysis Programs
## 10 Generalization of Wellbore Effects in Pressure Transient Analysis
## # ... with 151 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#perform-a-initial-search">Perform a initial search</a></li>
      <li><a href="#what-type-of-paper-do-we-have">What type of paper do we have?</a></li>
      <li><a href="#collect-first-1000-rows">Collect first 1000 rows</a></li>
      <li><a href="#collect-second-set-of-1000-rows">Collect second set of 1000 rows</a></li>
      <li><a href="#collect-next-set-of-1000-rows">Collect next set of 1000 rows</a></li>
      <li><a href="#collect-remaining-set">Collect remaining set</a></li>
      <li><a href="#binding-tables-in-one-dataframe">Binding tables in one dataframe</a></li>
      <li><a href="#find-which-papers-have-the-search-word-in-the-title">Find which papers have the search word in the title</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Alfonso Reyes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
